---
layout: default
---

<article>
  <h1>{{ page.title }}</h1>
  <p><small>{{ page.date | date: "%B %d, %Y" }}</small></p>

  <div class="content">
    {{ content }}
  </div>

  <!-- Views display -->
  <p id="views">Loading views…</p>
</article>

<script>
(function(){
  const namespace = "investnama_views"; // keep same as blog.html
  const key = "{{ page.path | replace: '/', '-' | replace: '.', '-' | replace: '_', '-' }}";
  const apiHit = "https://api.countapi.xyz/hit/" + namespace + "/" + encodeURIComponent(key);
  const apiGet = "https://api.countapi.xyz/get/" + namespace + "/" + encodeURIComponent(key);
  const el = document.getElementById('views');
  const viewedKey = 'viewed_' + namespace + '_' + key;

  if (!localStorage.getItem(viewedKey)) {
    fetch(apiHit)
      .then(r => r.json())
      .then(d => { el.innerText = (d.value || 0) + ' views'; })
      .catch(() => fetch(apiGet).then(r => r.json()).then(d => el.innerText = (d.value||0) + ' views'))
      .finally(() => localStorage.setItem(viewedKey, '1'));
  } else {
    fetch(apiGet)
      .then(r => r.json())
      .then(d => { el.innerText = (d.value || 0) + ' views'; })
      .catch(() => { el.innerText = '— views'; });
  }
})();
</script>
